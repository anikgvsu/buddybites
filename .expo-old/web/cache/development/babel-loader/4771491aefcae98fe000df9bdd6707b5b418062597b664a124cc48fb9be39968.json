{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { getDatabase, onValue, push, ref, remove, set } from \"firebase/database\";\nimport { firebaseConfig } from \"./fb-credentials\";\nimport { initializeApp } from \"firebase/app\";\nexport function initUserDB() {\n  initializeApp(firebaseConfig);\n}\nexport function storeUserItem(item) {\n  console.log('Writing: ', item);\n  var db = getDatabase();\n  var reference = ref(db, \"userData/\");\n  push(reference, item);\n}\nexport function setupUserListener(updateFunc) {\n  var db = getDatabase();\n  var reference = ref(db, \"userData/\");\n  onValue(reference, function (snapshot) {\n    if (snapshot != null && snapshot.val()) {\n      var fbObject = snapshot.val();\n      var newArr = [];\n      Object.keys(fbObject).map(function (key, index) {\n        newArr.push(_objectSpread(_objectSpread({}, fbObject[key]), {}, {\n          id: key\n        }));\n      });\n      updateFunc(newArr);\n    } else {\n      updateFunc([]);\n    }\n  });\n}","map":{"version":3,"names":["getDatabase","onValue","push","ref","remove","set","firebaseConfig","initializeApp","initUserDB","storeUserItem","item","console","log","db","reference","setupUserListener","updateFunc","snapshot","val","fbObject","newArr","Object","keys","map","key","index","_objectSpread","id"],"sources":["/Users/shafiqulanik/GVSU/S23/CIS 657 - Mobile Application Development/Project/buddybites/helpers/fb-user.js"],"sourcesContent":["import {\n  getDatabase,\n  onValue,\n  push,\n  ref,\n  remove,\n  set,\n} from \"firebase/database\";\n\nimport { firebaseConfig } from \"./fb-credentials\";\nimport { initializeApp } from \"firebase/app\";\n\nexport function initUserDB() {\n  initializeApp(firebaseConfig);\n}\n\nexport function storeUserItem(item) {\n  console.log('Writing: ', item);\n  const db = getDatabase();\n  const reference = ref(db, \"userData/\");\n  push(reference, item);\n}\n\nexport function setupUserListener(updateFunc) {\n    const db = getDatabase();\n    const reference = ref(db,\"userData/\" )\n    onValue(reference, (snapshot) => {\n        if (snapshot?.val()) {\n          const fbObject = snapshot.val();\n          const newArr = [];\n          Object.keys(fbObject).map((key, index) => {\n            newArr.push({ ...fbObject[key], id: key });\n          });\n          updateFunc(newArr);\n        } else {\n          updateFunc([]);\n        }\n      });\n}\n"],"mappings":";;;AAAA,SACEA,WAAW,EACXC,OAAO,EACPC,IAAI,EACJC,GAAG,EACHC,MAAM,EACNC,GAAG,QACE,mBAAmB;AAE1B,SAASC,cAAc;AACvB,SAASC,aAAa,QAAQ,cAAc;AAE5C,OAAO,SAASC,UAAUA,CAAA,EAAG;EAC3BD,aAAa,CAACD,cAAc,CAAC;AAC/B;AAEA,OAAO,SAASG,aAAaA,CAACC,IAAI,EAAE;EAClCC,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEF,IAAI,CAAC;EAC9B,IAAMG,EAAE,GAAGb,WAAW,CAAC,CAAC;EACxB,IAAMc,SAAS,GAAGX,GAAG,CAACU,EAAE,EAAE,WAAW,CAAC;EACtCX,IAAI,CAACY,SAAS,EAAEJ,IAAI,CAAC;AACvB;AAEA,OAAO,SAASK,iBAAiBA,CAACC,UAAU,EAAE;EAC1C,IAAMH,EAAE,GAAGb,WAAW,CAAC,CAAC;EACxB,IAAMc,SAAS,GAAGX,GAAG,CAACU,EAAE,EAAC,WAAY,CAAC;EACtCZ,OAAO,CAACa,SAAS,EAAE,UAACG,QAAQ,EAAK;IAC7B,IAAIA,QAAQ,YAARA,QAAQ,CAAEC,GAAG,CAAC,CAAC,EAAE;MACnB,IAAMC,QAAQ,GAAGF,QAAQ,CAACC,GAAG,CAAC,CAAC;MAC/B,IAAME,MAAM,GAAG,EAAE;MACjBC,MAAM,CAACC,IAAI,CAACH,QAAQ,CAAC,CAACI,GAAG,CAAC,UAACC,GAAG,EAAEC,KAAK,EAAK;QACxCL,MAAM,CAAClB,IAAI,CAAAwB,aAAA,CAAAA,aAAA,KAAMP,QAAQ,CAACK,GAAG,CAAC;UAAEG,EAAE,EAAEH;QAAG,EAAE,CAAC;MAC5C,CAAC,CAAC;MACFR,UAAU,CAACI,MAAM,CAAC;IACpB,CAAC,MAAM;MACLJ,UAAU,CAAC,EAAE,CAAC;IAChB;EACF,CAAC,CAAC;AACR"},"metadata":{},"sourceType":"module","externalDependencies":[]}